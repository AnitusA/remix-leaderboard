# 🔄 Database Schema Changes Log

This document tracks all database schema changes made directly in Supabase SQL editor.

## 📋 **Change Log Format**

For each change made in Supabase SQL editor, add an entry below:

```markdown
## [Date] - [Description]

**Changed by**: [Your name]
**Reason**: [Why the change was made]
**Tables affected**: [List of tables]

### SQL Changes
```sql
-- Paste the exact SQL commands you ran
```

### Impact
- [ ] Breaking changes to existing code
- [ ] New TypeScript types needed
- [ ] Documentation updates needed
- [ ] Migration file created

### Follow-up Actions
- [ ] Created migration file: `supabase/migrations/YYYYMMDDHHMMSS_description.sql`
- [ ] Updated TypeScript types
- [ ] Updated API documentation
- [ ] Tested in development
- [ ] Committed to version control
```

---

## 📝 **Actual Change Log**

*Add your schema changes below using the format above*

<!-- Example entry:
## July 19, 2025 - Added user preferences table

**Changed by**: Developer Name
**Reason**: Need to store user notification preferences
**Tables affected**: user_preferences (new table)

### SQL Changes
```sql
CREATE TABLE user_preferences (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  member_id BIGINT REFERENCES members(id) ON DELETE CASCADE,
  email_notifications BOOLEAN DEFAULT TRUE,
  push_notifications BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_user_preferences_member_id ON user_preferences(member_id);
```

### Impact
- [x] Breaking changes to existing code
- [x] New TypeScript types needed
- [x] Documentation updates needed
- [x] Migration file created

### Follow-up Actions
- [x] Created migration file: `supabase/migrations/20250719120000_add_user_preferences.sql`
- [x] Updated TypeScript types in `app/types/database.ts`
- [x] Updated API documentation
- [x] Tested in development
- [x] Committed to version control
-->

---

## 🛠️ **Quick Reference**

### **After Making Changes in Supabase SQL Editor**

1. **Document the change** here immediately
2. **Create migration file**:
   ```bash
   npm run db:create-migration "description_of_change"
   ```
3. **Copy your SQL** to the migration file
4. **Update TypeScript types** if needed
5. **Test thoroughly**
6. **Commit everything**:
   ```bash
   git add .
   git commit -m "feat: add database migration for [description]"
   ```

### **Available Commands**

```bash
npm run db:sync              # Show sync tool menu
npm run db:create-migration  # Create new migration file
npm run db:check            # Check migration status
npm run db:dump             # Instructions for schema dump
npm run db:docs             # Create schema documentation
```

### **File Locations**

- **Migrations**: `supabase/migrations/`
- **Schema docs**: `docs/database-schema.md`
- **Change log**: `docs/schema-changes.md` (this file)
- **Types**: `app/types/database.ts`

---

**Remember**: Always sync your local migration files with changes made directly in Supabase!
